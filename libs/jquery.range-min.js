(function(e,c,a,f){var b=function(){return this.init.apply(this,arguments)};b.prototype={defaults:{onstatechange:function(){},isRange:false,showLabels:true,showScale:true,step:1,format:"%s",theme:"theme-green",width:300,disable:false},template:'<div class="slider-container">			<div class="back-bar">                <div class="selected-bar"></div>                <div class="pointer low"></div><div class="pointer-label">123456</div>                <div class="pointer high"></div><div class="pointer-label">456789</div>                <div class="clickable-dummy"></div>            </div>            <div class="scale"></div>		</div>',init:function(h,g){this.options=e.extend({},this.defaults,g);this.inputNode=e(h);this.options.value=this.inputNode.val()||(this.options.isRange?this.options.from+","+this.options.from:this.options.from);this.domNode=e(this.template);this.domNode.addClass(this.options.theme);this.inputNode.after(this.domNode);this.domNode.on("change",this.onChange);this.pointers=e(".pointer",this.domNode);this.lowPointer=this.pointers.first();this.highPointer=this.pointers.last();this.labels=e(".pointer-label",this.domNode);this.lowLabel=this.labels.first();this.highLabel=this.labels.last();this.scale=e(".scale",this.domNode);this.bar=e(".selected-bar",this.domNode);this.clickableBar=this.domNode.find(".clickable-dummy");this.interval=this.options.to-this.options.from;this.render()},render:function(){if(this.inputNode.width()===0&&!this.options.width){console.log("jRange : no width found, returning");return}else{this.domNode.width(this.options.width||this.inputNode.width());this.inputNode.hide()}if(this.isSingle()){this.lowPointer.hide();this.lowLabel.hide()}if(!this.options.showLabels){this.labels.hide()}this.attachEvents();if(this.options.showScale){this.renderScale()}this.setValue(this.options.value)},isSingle:function(){if(typeof(this.options.value)==="number"){return true}return(this.options.value.indexOf(",")!==-1||this.options.isRange)?false:true},attachEvents:function(){this.clickableBar.click(e.proxy(this.barClicked,this));this.pointers.on("mousedown touchstart",e.proxy(this.onDragStart,this));this.pointers.bind("dragstart",function(g){g.preventDefault()})},onDragStart:function(g){if(this.options.disable||(g.type==="mousedown"&&g.which!==1)){return}g.stopPropagation();g.preventDefault();var h=e(g.target);this.pointers.removeClass("last-active");h.addClass("focused last-active");this[(h.hasClass("low")?"low":"high")+"Label"].addClass("focused");e(a).on("mousemove.slider touchmove.slider",e.proxy(this.onDrag,this,h));e(a).on("mouseup.slider touchend.slider touchcancel.slider",e.proxy(this.onDragEnd,this))},onDrag:function(i,h){h.stopPropagation();h.preventDefault();if(h.originalEvent.touches&&h.originalEvent.touches.length){h=h.originalEvent.touches[0]}else{if(h.originalEvent.changedTouches&&h.originalEvent.changedTouches.length){h=h.originalEvent.changedTouches[0]}}var g=h.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,i,g])},onDragEnd:function(g){this.pointers.removeClass("focused");this.labels.removeClass("focused");e(a).off(".slider")},barClicked:function(h){if(this.options.disable){return}var g=h.pageX-this.clickableBar.offset().left;if(this.isSingle()){this.setPosition(this.pointers.last(),g,true,true)}else{var i=Math.abs(parseInt(this.pointers.first().css("left"),10)-g+this.pointers.first().width()/2)<Math.abs(parseInt(this.pointers.last().css("left"),10)-g+this.pointers.first().width()/2)?this.pointers.first():this.pointers.last();this.setPosition(i,g,true,true)}},onChange:function(l,i,m,h){var j,g;if(i.isSingle()){j=0;g=i.domNode.width()}else{j=m.hasClass("high")?i.lowPointer.position().left+i.lowPointer.width()/2:0;g=m.hasClass("low")?i.highPointer.position().left+i.highPointer.width()/2:i.domNode.width()}var k=Math.min(Math.max(h,j),g);i.setPosition(m,k,true)},setPosition:function(m,h,i,j){var k,g=this.lowPointer.position().left,l=this.highPointer.position().left,n=this.highPointer.width()/2;if(!i){h=this.prcToPx(h)}if(m[0]===this.highPointer[0]){l=Math.round(h-n)}else{g=Math.round(h-n)}m[j?"animate":"css"]({left:Math.round(h-n)});if(this.isSingle()){k=0}else{k=g+n}this.bar[j?"animate":"css"]({width:Math.round(l+n-k),left:k});this.showPointerValue(m,h,j);this.isReadonly()},setValue:function(h){var g=h.toString().split(",");this.options.value=h;var i=this.valuesToPrc(g.length===2?g:[0,g[0]]);if(this.isSingle()){this.setPosition(this.highPointer,i[1])}else{this.setPosition(this.lowPointer,i[0]);this.setPosition(this.highPointer,i[1])}},renderScale:function(){var h=this.options.scale||[this.options.from,this.options.to];var k=Math.round((100/(h.length-1))*10)/10;var j="";for(var g=0;g<h.length;g++){j+='<span style="left: '+g*k+'%">'+(h[g]!="|"?"<ins>"+h[g]+"</ins>":"")+"</span>"}this.scale.html(j);e("ins",this.scale).each(function(){e(this).css({marginLeft:-e(this).outerWidth()/2})})},getBarWidth:function(){var g=this.options.value.split(",");if(g.length>1){return parseInt(g[1],10)-parseInt(g[0],10)}else{return parseInt(g[0],10)}},showPointerValue:function(g,k,i){var m=e(".pointer-label",this.domNode)[g.hasClass("low")?"first":"last"]();var o;var n=this.positionToValue(k);if(e.isFunction(this.options.format)){var l=this.isSingle()?f:(g.hasClass("low")?"low":"high");o=this.options.format(n,l)}else{o=this.options.format.replace("%s",n)}var h=m.html(o).width(),j=k-h/2;j=Math.min(Math.max(j,0),this.options.width-h);m[i?"animate":"css"]({left:j});this.setInputValue(g,n)},valuesToPrc:function(h){var g=((h[0]-this.options.from)*100/this.interval),i=((h[1]-this.options.from)*100/this.interval);return[g,i]},prcToPx:function(g){return(this.domNode.width()*g)/100},positionToValue:function(h){var g=(h/this.domNode.width())*this.interval;g=g+this.options.from;return Math.round(g/this.options.step)*this.options.step},setInputValue:function(i,h){if(this.isSingle()){this.options.value=h.toString()}else{var g=this.options.value.split(",");if(i.hasClass("low")){this.options.value=h+","+g[1]}else{this.options.value=g[0]+","+h}}if(this.inputNode.val()!==this.options.value){this.inputNode.val(this.options.value);this.options.onstatechange.call(this,this.options.value)}},getValue:function(){return this.options.value},isReadonly:function(){this.domNode.toggleClass("slider-readonly",this.options.disable)},disable:function(){this.options.disable=true;this.isReadonly()},enable:function(){this.options.disable=false;this.isReadonly()},toggleDisable:function(){this.options.disable=!this.options.disable;this.isReadonly()}};var d="jRange";e.fn[d]=function(i){var h=arguments,g;this.each(function(){var l=e(this),k=e.data(this,"plugin_"+d),j=typeof i==="object"&&i;if(!k){l.data("plugin_"+d,(k=new b(this,j)));e(c).resize(function(){k.setValue(k.getValue())})}if(typeof i==="string"){g=k[i].apply(k,Array.prototype.slice.call(h,1))}});return g||this}})(jQuery,window,document);